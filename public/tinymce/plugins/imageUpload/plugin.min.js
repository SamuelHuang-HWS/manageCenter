!(function () {
  'use strict'
  var e = tinymce.util.Tools.resolve('tinymce.PluginManager')
  !(function t () {
    e.add('imageUpload', function (e) {
      var t, n
      return (t = e).addCommand('InsertImageUpload', function (e) {
        if (Array.isArray(e) && e.length > 0) {
          var html = ''
          for (var i in e) {
            var obj = e[i]
            html += '<img src="' + obj + '" class="image" /><br />'
            if (i < e.length - 1) {
              html += '<br />'
            }
          }
          t.execCommand('mceInsertContent', false, html)
        }
      }),
        (n = e).ui.registry.addButton('imageUpload', {
          icon: 'image',
          tooltip: 'Insert/edit image',
          onAction: function () {
            if (typeof n.settings.clickImage === 'function') {
              return n.settings.clickImage(n)
            }
            return null
          }
        }),
        {}
    })
  }())
}())
